# README Админка для настройки системы InDoor навигации
Система отвечает за регистрацию клиентов и пользователей.
Предоставляет личный кабинет клиента, в котором он может создать и редактировать все свои объекты.
Предоставляет доступ для пользователей, занимающихся обслуживанием системы.

# Настройка переменных окружения
DATABASE_NAME = имя базы данных
DATABASE_USERNAME = пользователь бд
DATABASE_PASSWORD = пароль бд
DATABASE_HOST = хост бд
DATABASE_PORT = 5432
DATA_TO_DOCUMENT_BASE_URL= url и порт системы формирования pdf для печати
USER_SITE_BASE_URL= базовый url сайта, на котором расположена пользовательское веб приложение. Используется для формирования qr кодов точек


# Система авторизации
Система отвечает за регистрацию клиентов и пользователей.
За восстановление и смену пароля

## Сущности
###  Организация
Сущность, объединяющая все объекты Клиента, а также все его дополнительные аккаунты.
Все Пользователи также принадлежат к отдельной организации, представляющей владельца системы.

### Клиент
Клиент характеризуется EMail и паролем.
Имеет роли 'Клиент. Администратор' и 'Клиент. Пользователь'

### Пользователь
Пользователь характеризуется EMail и паролем.
Имеет роли 'Менеджер клиентов', 'Администратор', 'Администратор пользователей'

## Процессы
### Регистрация Клиента
В процессе регистрации Клиент самостоятельно регистрируется в системе, путём ввода EMail, пароля и названия организации.
При этом создаётся новая Организация, создаётся Пользователь с привязкой к организации, Пользователю добавляется роль 'Клиент. Администратор'

### Регистрация Пользователя
Первый пользователь  с ролью 'Администратор' и 'Администратор пользователей' создаётся в системе сразу при первоначальной установке.
Т.е. отдельной регистрации Пользователя в системе нет.

### Регистрация дополнительного аккаунта Клиента
Это заведение нового пользователя для существующего Клиента.
Происходит в личном кабинете Клиента.

### Смена пароля у Пользователя

### Смена пароля у Клиента

### Восстановление пароля у Пользователя

### Восстановление пароля у Клиента

# Личный кабинет Клиента



# Личный кабинет Пользователя








## Создать список дуг и целей для конкретного помещения
На данный момент у нас хранение списка дуг и списка целей выполняется в файлах roads.csv и targets.csv
### Пример файла targets.csv

````csv
0, 75, 75, Object, Информаториум, magazine
1, 460, 75, Object, Лаборатория, mag
2, 460, 465, Object, Библиотека, m
3, 75, 465, Object, Спорт зал, mag
````

### Поля файла targets.csv
1. уникальный идентификатор точки
2. Координата x
3. Координата y
4. Тип точки: Object/Сrossroads
5. Название точки
6. Описание точки

Запятые могут экранироваться \


### Пример файла roads.csv

````csv
0, 1, 2
0, 3, 3
1, 2, 10
1, 3, 2
2, 3, 4
````

### Поля файла roads.csv
1. Идентификатор точки начала
2. Идентификатор точки конца
3. Вес дуги

## Как работает
1. На вход подаём файл csv.
В нём есть уровень с именем Routes. В нём, с помощью тегов ellipse или circle нарисованы точки,
а lines их соединяют между собой.
Каждой точке также указан идентификатор.


Пример:

````csv
<?xml version="1.0"?>
<svg width="640" height="480" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">
 <!-- Created with SVG-edit - https://github.com/SVG-Edit/svgedit-->

 <g class="layer">
  <title>Background</title>
  <line fill="none" id="svg_1" stroke="#000000" stroke-width="5" x1="42.5" x2="217.5" y1="64.5" y2="65.5"/>
  <path d="m30.5,138.5c-0.528,-1.825333 -0.329607,-2.628357 0.4,-3.353333c0.695105,-0.690689 1.512968,-0.778534 2.257166,-1.356506c0.576309,-0.447586 1.315002,-1.169479 2.185501,-1.664825c0.487164,-0.277206 1.823128,-0.794388 2.242832,-0.946671c0.927769,-0.336609 1.425838,-0.505936 2.449169,-0.853333c0.511505,-0.173645 1.965332,-0.658661 2.809334,-0.940002c0.747997,-0.249329 1.424274,-0.473846 2.655998,-0.88533c0.601467,-0.200943 1.524418,-0.511391 2.157166,-0.757164c1.015484,-0.394432 1.727646,-0.725082 2.468166,-1.068169c0.750164,-0.347557 1.482216,-0.710602 2.553169,-1.153c0.659359,-0.272369 1.604202,-0.602806 2.220165,-0.735001c1.190964,-0.255608 2.101185,-0.272827 2.701332,-0.282166c1.199699,-0.018661 2.092854,0.028625 2.942837,-0.061668c1.042568,-0.110748 1.699574,-0.398521 2.470497,-0.658836c0.953815,-0.322067 1.768307,-0.684921 2.457333,-1.085327c0.771278,-0.448196 1.540398,-0.713837 2.346672,-0.913338c0.988678,-0.244637 1.907951,-0.279999 2.849327,-0.285332c0.785988,-0.004456 1.608002,0 2.666672,0c0.930664,0 1.765327,0 2.771164,0c0.6315,0 1.816833,0 2.620834,0c0.821999,0 1.853165,0 2.538666,0c0.834663,0 1.8405,0 2.693169,0c0.964333,0 1.778831,0 2.647331,0c0.8955,0 1.791,0 2.6595,0c1.069336,0 1.783333,0 2.688667,0c0.968666,0 1.772667,0 2.594666,0c1.031166,0 1.931831,0 2.952667,0c0.800003,0 1.599998,0 2.595497,0c0.747337,0 1.779167,0 2.725838,0c0.678665,0 1.657333,0 2.431335,0c0.899994,0 1.763329,0 2.788994,0c0.958336,0 1.821144,-0.004944 2.479172,0.020836c0.67878,0.026596 1.951149,0.154518 2.7285,0.425827c0.773254,0.269875 1.584,0.720001 2.556,1.206001c0.694664,0.347336 1.389862,0.693596 2.361328,1.180672c0.814949,0.4086 1.49556,0.725273 2.312004,1.266495c0.663475,0.439812 1.502716,0.850853 2.368668,0.895668c0.894348,0.04628 1.695,0.319702 2.452667,0.720505c0.84938,0.449318 1.581001,0.762108 2.366661,1.283997c0.657143,0.436523 1.514595,0.813766 2.517342,1.199997c0.538513,0.207428 1.370529,0.481918 2.394333,0.899841c0.679977,0.277573 1.454391,0.555923 2.400833,0.900162c0.841248,0.305969 1.484344,1.041183 2.15683,1.600006c0.652359,0.542099 1.599304,0.903824 2.195999,1.599991c0.61441,0.716827 1.042267,1.17952 1.685333,1.600006c0.875809,0.572678 1.645218,1.206863 2.307999,1.599991c0.686478,0.407166 1.593857,0.967484 2.174667,1.766678c0.456314,0.627899 0.835693,1.403473 1.485336,1.949326c0.678558,0.57016 1.51799,1.04657 2.119171,1.536667c0.635025,0.517685 1.548401,1.208084 2.343658,1.590164c0.777969,0.373779 1.758255,0.69783 2.379837,1.157166c0.724518,0.5354 1.272003,1.200012 1.972,1.900009c0.5,0.5 1.188873,1.245163 2.021332,1.800003c0.655518,0.436905 1.536087,0.870041 2.053329,1.310654c0.833496,0.710007 1.273727,1.260895 1.872009,1.800003c0.900543,0.811462 1.436157,1.190918 1.978653,1.58934c0.820236,0.602402 1.614899,1.191864 2.317505,1.795502c0.653,0.56102 1.454498,1.241684 2.052673,1.651825c0.744049,0.510162 1.375397,1.079681 1.883667,1.731842c0.611771,0.784973 1.533585,0.928207 2.278,1.077988c0.930038,0.187134 1.649857,0.642288 2.442657,1.042847c0.781876,0.395035 1.595139,0.958466 2.300171,1.379166c0.784515,0.468124 1.751587,0.484146 2.5,0.854156c0.872513,0.431366 1.443726,1.092194 2.166672,1.666672c0.772049,0.61348 1.32724,0.98851 1.880661,1.342834c1.020065,0.653076 1.726303,0.987427 2.466003,1.455826c0.887497,0.561996 1.64296,1.219238 2.322662,1.601334c0.560333,0.314987 1.576874,0.773911 2.328003,1.200012c0.831207,0.471527 1.363083,1.14444 2.335999,1.379166c0.896576,0.216309 1.843063,0.337296 2.505341,0.730667c0.502365,0.298386 1.223785,0.81131 2.189331,1.53299c0.608856,0.455078 1.573334,0.957169 2.305328,1.257172c0.731995,0.300003 1.527023,0.705276 2.248169,1.199997c0.734818,0.504089 1.48233,0.927139 2.418503,1.133331c0.780624,0.171936 1.667709,0.139694 2.833328,0.5c0.615997,0.190414 1.497879,0.691376 2.100006,1.018509c0.896881,0.487274 1.788727,0.90535 2.379166,1.106491c0.826874,0.281693 1.843369,0.401672 2.674164,0.567001c0.979248,0.19487 1.628952,0.736786 2.615997,1.17334c0.733597,0.324463 1.542908,0.542999 2.548004,0.718658c0.700455,0.122406 1.468018,0.206772 2.649323,0.650665c0.683594,0.256866 1.339035,0.599121 1.980011,0.864014c1.177704,0.48671 2.020309,0.54718 2.822662,0.570663c0.752182,0.022003 1.599106,0.058304 2.544006,0.565323c0.900146,0.483002 1.477737,1.24144 2.311996,1.410675c1.011551,0.2052 1.793381,0.023178 2.776001,0.305328c0.630585,0.181076 1.762756,0.568787 2.551331,0.66333c0.819824,0.098297 1.886734,0.197449 2.594666,0.405334c0.684509,0.201019 1.61676,0.500122 2.405334,0.594666c0.819824,0.098297 1.883011,0.210754 2.843338,0.478012c0.772949,0.215103 1.70224,0.426254 2.457321,0.489334c0.831909,0.069504 1.70665,0.078857 2.580002,0.084c1.223663,0.007202 1.952332,0.001328 2.625,0.001328c0.939011,0 2.139008,0 2.720337,0c0.806992,0 2.016006,0 2.789322,0c0.801361,0 1.817352,0 2.865356,0c0.718475,0 1.427979,0 2.5,0c0.976501,0 1.6875,0 2.418488,0c1.081512,0 2.09549,0 2.748169,0c0.984009,0 2.021332,0 2.752655,0c0.747345,0 1.49469,0 2.925842,0c0.664337,0 1.61084,0 2.220184,0c1.201324,0 2.101318,0 2.701324,0c1.200165,0 1.804504,0 2.735992,0c0.649323,0 2.048004,0 2.789337,0c0.749329,0 1.490662,0 2.553009,0c0.974976,0 1.859985,0 2.90033,0c0.695984,0 1.605316,0 2.604004,0c0.796478,0 1.551819,0.082504 2.666656,-0.010666c0.992828,-0.082977 1.677307,-0.341125 2.544006,-0.636002c0.682678,-0.232269 1.84967,-0.673309 2.273315,-0.837326c0.874451,-0.338547 1.748871,-0.685379 2.580017,-1.032013c1.091919,-0.455383 1.670898,-0.763138 2.457336,-1.037323c0.946655,-0.330048 1.758209,-0.323624 2.534668,-0.508011c1.149933,-0.273087 1.719788,-1.002197 2.229309,-1.455994c0.744995,-0.663513 1.520813,-0.975739 2.264008,-1.195999c1.092621,-0.323807 1.956543,-0.593903 2.604004,-1.158661c0.589355,-0.514053 1.371033,-1.321014 1.953339,-1.928009c0.379395,-0.395493 1.170929,-1.412689 1.585327,-1.978668c0.488159,-0.666702 1.299011,-1.034027 2.141327,-1.304001c0.888123,-0.284668 1.656433,-1.078369 2.141174,-1.578995c0.560211,-0.578568 1.352844,-1.497467 1.741516,-2.023666c0.401123,-0.543076 0.974915,-1.403 1.434662,-2.314667c0.444244,-0.88089 0.62973,-1.497147 1.050659,-2.314667c0.402954,-0.782608 0.937408,-1.462784 1.520508,-2.080826c0.776184,-0.822678 1.417755,-1.356842 1.881165,-1.947342c0.671631,-0.855835 0.848938,-1.837875 1.15033,-2.482498c0.330933,-0.707794 0.966736,-1.556854 1.449341,-2.05867c0.755096,-0.785126 1.326721,-1.296875 1.947998,-2.115997c0.436737,-0.575821 0.8013,-1.386932 1.471161,-2.24733c0.416779,-0.535324 1.176819,-1.246323 1.757996,-1.794342c0.451202,-0.425491 1.579987,-1.379471 1.902832,-1.642334c0.664337,-0.540909 1.353607,-1.048996 1.895996,-1.631989c0.871613,-0.936844 0.990295,-1.708984 1.472015,-2.684006c0.314819,-0.637207 0.881104,-1.206757 1.666656,-2c0.594849,-0.600662 1.16803,-1.204193 2,-1.833328c0.751587,-0.568359 1.509216,-0.90947 1.979156,-1.666672c0.46759,-0.753433 0.873749,-1.357544 1.846191,-1.889328c0.66983,-0.366287 1.59436,-0.552963 2.229309,-0.865341c1.049103,-0.516129 1.664185,-1.053085 2.028687,-1.307831c0.787689,-0.550476 2.080902,-1.441193 2.537659,-1.737c0.917877,-0.594452 1.376434,-0.879944 2.281677,-1.392502c0.427307,-0.241928 1.583038,-0.850418 2.530334,-1.145493c0.761078,-0.237061 1.74353,-0.475601 2.519653,-0.867844c0.554779,-0.28038 1.328186,-0.829865 2.360657,-1.123993c0.820526,-0.233749 1.818939,-0.077774 2.570679,-0.255997c0.977448,-0.23172 1.616333,-0.73999 2.363342,-1.210175c0.901367,-0.567368 1.598816,-0.684708 2.439331,-0.703171c0.99707,-0.021896 1.818512,0.02565 2.629333,-0.086655c1.008606,-0.139694 1.856323,-0.550415 2.68399,-0.748001c0.798676,-0.190674 1.685425,-0.154465 2.682678,-0.167999c0.796631,-0.010818 1.567841,-0.020294 2.516479,-0.351334c0.876434,-0.305832 1.852478,-0.567444 2.476837,-0.622009c0.965454,-0.084366 2.066162,-0.230362 2.782349,-0.52533c0.871338,-0.358864 1.541504,-0.489578 2.656311,-0.5c0.885315,-0.00827 1.642517,0 2.546997,0c0.800018,0 1.759857,0 2.574341,0c0.8685,0 2.06366,0 2.654999,0c0.837006,0 1.966003,0 2.800018,0c0.908997,0 1.81543,-0.097916 2.719666,0.010666c0.928192,0.111458 1.586151,0.570679 2.589325,0.822662c0.77597,0.194916 1.542236,-0.042038 2.589325,0.202667c0.759399,0.177475 1.32608,1.077057 2.046661,1.528c0.779358,0.487732 1.591858,0.38884 2.563843,0.657333c0.79776,0.220367 1.808502,0.562622 2.495667,0.831345c0.8573,0.335251 1.655212,0.776718 2.404663,1.168823c0.722534,0.378021 1.359253,1.040359 2.146515,1.342499c0.894958,0.34346 1.707428,0.335754 2.7435,0.488678c0.87381,0.128967 1.604187,0.589111 2.493835,1.147324c0.676056,0.424194 1.478485,0.923141 2.036835,1.300003c0.790771,0.533707 1.740479,0.899994 2.264496,1.100006c1.048004,0.400009 1.762085,0.690353 2.610168,1.099991c1.008759,0.487259 1.56662,0.824707 2.58316,1.178833c0.762756,0.265717 1.490387,0.707397 2.195984,1.270508c0.787689,0.628616 1.550598,0.848373 2.236023,1.286667c0.794617,0.508133 1.570221,1.09198 2.422668,1.397324c0.695068,0.248978 1.671783,0.658752 2.222656,1.021332c0.658295,0.433289 1.370514,0.949554 2.14801,1.464005c0.790497,0.523056 1.588409,1.003494 2.374664,1.434662c0.744781,0.408417 1.451599,0.758102 2.378479,1.225342c0.782349,0.394379 1.500366,0.758347 2.46402,1.342667c0.532288,0.322769 1.337311,0.826279 2.245483,1.511993c0.676697,0.510956 1.333344,1.166656 1.854187,1.6875c0.645813,0.645828 1.315063,1.332352 1.76181,1.653839c1.006531,0.724335 1.685974,0.944489 2.378693,1.210663c0.723267,0.277908 1.490875,0.523697 2.517487,1.157669c0.699097,0.431702 1.336823,1.00502 2.031006,1.565994c1.115295,0.901276 1.524506,1.204422 2.413483,1.791c0.465393,0.307098 0.952911,0.612518 2,1.200012c0.546387,0.306564 1.707581,0.905029 2.319336,1.199829c1.257721,0.606064 1.907104,0.891586 2.557343,1.179337c0.648407,0.286926 1.293945,0.565399 1.932007,0.835495c1.233215,0.522034 2.392303,0.997955 2.935669,1.223663c1.007874,0.418655 1.476257,0.594528 2.28833,0.975006c1.218658,0.570969 1.91983,1.101883 2.665497,1.586838c0.684143,0.444946 1.307617,0.749832 2.077179,1.38382c0.795654,0.655487 1.434662,1.349335 1.975983,1.890671c0.791992,0.792007 1.249451,1.305801 1.799988,1.764008c0.89801,0.747391 1.736542,0.878143 2.478027,1.222992c0.726837,0.338028 1.474457,1.113907 1.936646,1.813004c0.525391,0.794693 1.067413,1.469879 1.744019,1.992004c0.666504,0.514343 1.222443,0.856537 2.069336,1.519989c0.912842,0.715118 1.49762,1.260956 2.076477,1.813339c0.56842,0.542419 1.354187,1.333344 1.834167,1.813339c0.644989,0.645004 1.200012,1.199997 1.929504,1.929489c0.757172,0.757172 1.29718,1.226257 1.731842,2.157166c0.363098,0.777618 0.846558,1.381104 1.436005,2.021347c0.49173,0.534088 1.072174,1.349762 1.610138,2.099487c0.381897,0.532272 1.17865,1.558792 1.583679,2.035507c0.630371,0.741974 1.097595,1.286331 1.817017,2.307663c0.270203,0.383606 0.807251,1.216949 1.38916,2.059998c0.290222,0.420502 1.168213,1.596252 1.788025,2.221344c0.571777,0.576645 1.178711,1.043594 1.715942,1.535995c0.783875,0.71843 1.443848,1.529434 1.838684,2.057327c0.689026,0.92131 1.201477,1.59816 1.84668,2.261337c0.493042,0.506836 1.31134,1.119125 1.714661,1.800003c0.489929,0.827148 0.745728,1.723602 1.232666,2.495499c0.443115,0.702438 0.935608,1.290527 1.409851,2.004501c0.525879,0.791641 1.193359,1.185333 1.742798,2.0215c0.442444,0.673309 0.892639,1.682266 1.200012,2.274002c0.390747,0.752243 0.991577,1.663742 1.457153,2.157166c0.708923,0.751312 1.263672,1.268158 1.844177,1.848663c0.797363,0.797348 1.377014,1.378677 1.91333,1.91333c0.727051,0.724808 1.521301,1.224243 2.285339,1.569336c0.768127,0.346939 1.522949,1.013351 2.200012,1.416c0.835266,0.496735 1.471497,1.041092 2.32135,1.600006c0.658203,0.432861 1.479858,0.950089 2.063965,1.289322c0.905212,0.525711 1.630005,0.548721 2.436035,0.636002c1.180176,0.127777 1.788086,0.237518 2.720337,0.516342c0.67804,0.202805 1.791321,0.625885 2.626343,0.940994c0.882263,0.332932 1.324951,0.517517 2.226624,0.807495c1.262878,0.406143 2.031433,0.565414 2.733337,0.637833c0.959961,0.099045 1.872009,0.072006 2.772034,0.072006c0.899963,0 1.5,0 2.698669,0c0.880493,0 1.715942,0 2.715942,0c0.664551,0 1.686401,0.031876 2.485352,-0.010666c0.802307,-0.042725 1.808899,-0.326706 2.600037,-0.693832c0.80957,-0.375656 1.618591,-0.787277 2.199951,-1.180832c0.827209,-0.560028 1.413452,-1.105682 1.914673,-1.716003c0.784424,-0.95517 1.073669,-1.599182 1.585327,-2.598495c0.399231,-0.779755 0.683289,-1.326736 1.300049,-2.174835c0.584351,-0.803589 1.006836,-1.457779 1.399963,-2.226669c0.405823,-0.793732 0.801697,-1.549561 1.116028,-2.513336c0.285278,-0.874786 0.773621,-1.416382 1.379456,-2.189835c0.626648,-0.799957 0.631104,-1.539917 0.788513,-2.296829c0.2099,-1.00943 0.601563,-1.754211 1.216003,-2.650497c0.388184,-0.566284 0.900635,-1.519135 1.220825,-2.289841c0.235779,-0.567551 0.79187,-1.763062 1.131836,-2.353821c0.338806,-0.588699 0.882324,-1.408051 1.462036,-2.419174c0.376953,-0.657501 0.671326,-1.290466 1.185303,-2.280838c0.390503,-0.752365 0.879578,-1.537399 1.400024,-2.099991c0.674377,-0.72905 1.399841,-1.40451 1.94281,-2.004501l0.357178,-0.779175" fill="none" id="svg_4" stroke="#000000" stroke-dasharray="null" stroke-linecap="null" stroke-linejoin="null" stroke-width="5"/>
  <ellipse cx="83.5" cy="311.5" fill="none" id="svg_5" rx="54" ry="56" stroke="#000000" stroke-dasharray="null" stroke-linecap="null" stroke-linejoin="null" stroke-width="5"/>
 </g>
 <g class="layer">
  <title>Roads</title>
  <line fill="none" id="svg_8" stroke="#000000" stroke-dasharray="null" stroke-linecap="null" stroke-linejoin="null" stroke-width="5" transform="null" x1="42.5" x2="598.5" y1="30.5" y2="30.5"/>
  <ellipse cx="277.5" cy="279.5" fill="none" id="svg_9" rx="83" ry="85" stroke="#000000" stroke-dasharray="null" stroke-linecap="null" stroke-linejoin="null" stroke-width="5"/>
 </g>
</svg>

````

2. Также на вход подаётся xls файл, который содержит таблицу сопоставляющую идентификатор точки с её названием
, типом и описанием.
3. Для их загрузки используется сервис LoadBuildRoads
